function precise(e){return foo=Number.parseFloat(e).toPrecision(precision),foo.toString(10)}function toSub(e){for(var t="",a=Math.max(0,Math.floor(Math.log10(e)));a>=0;){var l=Math.floor(e/Math.pow(10,a))%10;t+=String.fromCharCode(8320+l),a--}return t}function onPhysClick(){tech_value=!0,tech.style.display="inline",phys.style.display="none"}function onTechClick(){tech_value=!1,phys.style.display="inline",tech.style.display="none"}function onRBClick(){RB_value=!0,BR.style.display="inline",RB.style.display="none"}function onBRClick(){RB_value=!1,RB.style.display="inline",BR.style.display="none"}function onPosHigh(){PosHigh_value=!1,NegHigh.style.display="inline",PosHigh.style.display="none"}function onNegHigh(){PosHigh_value=!0,PosHigh.style.display="inline",NegHigh.style.display="none"}function onSlow(){slow_value=!0,slow_button.style.display="none",fast_button.style.display="inline",onStop()}function onFast(){slow_value=!1,slow_button.style.display="inline",fast_button.style.display="none",onStop()}function onNegPosClick(){ZeroPos_value=!0,ZeroPos.style.display="inline",NegPos.style.display="none"}function onZeroPosClick(){ZeroPos_value=!1,NegPos.style.display="inline",ZeroPos.style.display="none"}function drawBackground(){c.lineWidth=3,c.setLineDash([]),c.strokeStyle="black",c.beginPath(),c.moveTo(.49*x,.15*y),c.lineTo(.05*x,.15*y),c.lineTo(.05*x,.85*y),c.lineTo(.125*x,.85*y),c.stroke(),c.closePath(),c.beginPath(),c.moveTo(.51*x,.15*y),c.lineTo(.95*x,.15*y),c.lineTo(.95*x,.85*y),c.lineTo(.875*x,.85*y),c.stroke(),c.closePath(),c.setLineDash([]),c.lineWidth=2,c.beginPath();var e=.008*x;if(c.moveTo(.525*x,.115*y+e),c.lineTo(.525*x,.115*y-e),c.moveTo(.525*x+e,.115*y),c.lineTo(.525*x-e,.115*y),c.moveTo(.475*x+e,.115*y),c.lineTo(.475*x-e,.115*y),c.stroke(),c.lineWidth=3,c.beginPath(),c.moveTo(.51*x,.1*y),c.lineTo(.51*x,.2*y),c.stroke(),c.lineWidth=8,c.beginPath(),c.moveTo(.49*x,.125*y),c.lineTo(.49*x,.175*y),c.stroke(),c.closePath(),c.font="30px Arial",c.fillStyle="black","en"==lang_str&&c.fillText(volt_symb+"\u2080 = "+precise(voltmax)+" V",.42*x,.085*y),"de"==lang_str){var t=precise(voltmax);t=t.replace(".",","),c.fillText(volt_symb+"\u2080 = "+t+" V",.42*x,.085*y)}if(1===parallels_value&&(c.beginPath(),c.lineWidth=3,c.moveTo(.325*x,.85*y),c.lineTo(.4*x,.85*y),c.stroke(),c.closePath(),c.beginPath(),c.moveTo(.6*x,.85*y),c.lineTo(.675*x,.85*y),c.stroke(),c.closePath()),2===parallels_value){voltageWires_2=[voltage[0],voltage[0],voltage[1],voltage[1],0,voltage[2],voltage[2],voltage[3],voltage[3],voltmax,voltage[0],voltage[1]];for(var a=0;a<lines_2.length;a++)showResults&&radio_button_colour&&(c.beginPath(),c.lineWidth=30,c.strokeStyle=colourFromVoltage(voltageWires_2[a]),0===lines_2[a].state&&(c.strokeStyle="rgba(0,0,0,0)"),4==a?(c.moveTo(lines_2[a].x_1*x+10,lines_2[a].y_1*y),c.lineTo(lines_2[a].x_2*x,lines_2[a].y_2*y)):9==a?(c.moveTo(lines_2[a].x_1*x,lines_2[a].y_1*y),c.lineTo(lines_2[a].x_2*x-10,lines_2[a].y_2*y)):10==a||11==a?(c.moveTo(lines_2[a].x_1*x,lines_2[a].y_1*y+10),c.lineTo(lines_2[a].x_2*x,lines_2[a].y_2*y-10)):(c.moveTo(lines_2[a].x_1*x,lines_2[a].y_1*y),c.lineTo(lines_2[a].x_2*x,lines_2[a].y_2*y)),c.stroke(),c.closePath()),c.beginPath(),c.lineWidth=3,c.strokeStyle="black",0===lines_2[a].state&&(c.strokeStyle="rgba(0,0,0,0)"),c.moveTo(lines_2[a].x_1*x,lines_2[a].y_1*y),c.lineTo(lines_2[a].x_2*x,lines_2[a].y_2*y),c.stroke(),c.closePath()}if(3===parallels_value)for(a=0;a<lines_3.length;a++)voltageWires_3=[voltage[0],voltage[0],voltage[1],voltage[1],voltage[2],voltage[3],voltage[4],voltage[5],voltage[0],voltage[1],voltage[2],voltage[3]],showResults&&radio_button_colour&&(c.beginPath(),c.lineWidth=30,c.strokeStyle=colourFromVoltage(voltageWires_3[a]),0===lines_3[a].state&&(c.strokeStyle="rgba(0,0,0,0)"),8==a||9==a||10==a||11==a?(c.moveTo(lines_3[a].x_1*x,lines_3[a].y_1*y+10),c.lineTo(lines_3[a].x_2*x,lines_3[a].y_2*y-10)):(c.moveTo(lines_3[a].x_1*x,lines_3[a].y_1*y),c.lineTo(lines_3[a].x_2*x,lines_3[a].y_2*y)),c.stroke(),c.closePath()),c.beginPath(),c.lineWidth=3,c.strokeStyle="black",0===lines_3[a].state&&(c.strokeStyle="rgba(0,0,0,0)"),c.moveTo(lines_3[a].x_1*x,lines_3[a].y_1*y),c.lineTo(lines_3[a].x_2*x,lines_3[a].y_2*y),c.stroke(),c.closePath();1==slow_value&&c.fillText(slow_text,.89*x,.95*y,.1*x,.05*y)}function drawResults(){if(radio_button_colour){if(arrowcolour="rgba(0,255,0,0.7)",transformed&&(c.resetTransform(),transformed=!1),c.lineWidth=30,c.setLineDash([]),c.strokeStyle=colourFromVoltage(0),c.beginPath(),c.moveTo(.49*x,.15*y),c.lineTo(.05*x,.15*y),c.lineTo(.05*x,.85*y),c.lineTo(.125*x,.85*y),c.stroke(),c.closePath(),c.strokeStyle=colourFromVoltage(voltmax),c.beginPath(),c.moveTo(.51*x,.15*y),c.lineTo(.95*x,.15*y),c.lineTo(.95*x,.85*y),c.lineTo(.875*x,.85*y),c.stroke(),c.closePath(),1===parallels_value&&(c.strokeStyle=colourFromVoltage(voltage[0]),c.beginPath(),c.lineWidth=30,c.moveTo(.325*x,.85*y),c.lineTo(.4*x,.85*y),c.stroke(),c.closePath(),c.strokeStyle=colourFromVoltage(voltage[1]),c.beginPath(),c.moveTo(.6*x,.85*y),c.lineTo(.675*x,.85*y),c.stroke(),c.closePath()),2===parallels_value)for(var e=0;e<lines_2.length;e++)c.beginPath(),c.lineWidth=3,c.strokeStyle="black",0===lines_2[e].state&&(c.strokeStyle="rgba(0,0,0,0)"),c.moveTo(lines_2[e].x_1*x,lines_2[e].y_1*y),c.lineTo(lines_2[e].x_2*x,lines_2[e].y_2*y),c.stroke(),c.closePath();if(3===parallels_value)for(e=0;e<lines_3.length;e++)c.beginPath(),c.lineWidth=3,c.strokeStyle="black",0===lines_3[e].state&&(c.strokeStyle="rgba(0,0,0,0)"),c.moveTo(lines_3[e].x_1*x,lines_3[e].y_1*y),c.lineTo(lines_3[e].x_2*x,lines_3[e].y_2*y),c.stroke(),c.closePath()}if(radio_button_height&&(arrowcolour="rgba(255,0,0,0.7)",isNaN(t_1)&&(d_1=d_0,t_1=t_0),t_1-t_0<1e3&&(d_1=new Date,t_1=d_1.getTime()),!transformed))if(c.resetTransform(),squash_val=(x_squash=x/(.707*(x+y)))>(y_squash=.9*y/(.409*(x+y)))?y_squash:x_squash,t_1-t_0<500){var t=(squash_val-1)/500*(t_1-t_0)+1,a=(t_1-t_0)/500,l=-586e-6*(t_1-t_0)+1,o=-.591/500*(t_1-t_0)+1;c.transform(t,0,0,t,0,0),c.save(),c.resetTransform,c.restore,c.transform(l,.409*a,.707*-a,o,.707*a*y,a*(y/squash_val-.409*(x+y)))}else c.transform(squash_val,0,0,squash_val,0,0),c.save(),c.resetTransform,c.restore,c.transform(.707,.409,-.707,.409,.707*y,y/squash_val-.409*(x+y)),c.save(),c.resetTransform,c.restore,transformed=!0,canvas_2.style.zIndex=1}function coordAndHeight_x(e,t){var a=.707;return squash_val*a*y+a*squash_val*(e-t)}function coordAndHeight_y(e,t,a){var l=.409;return 0==PosHigh_value&&-1!=a?squash_val*(y/squash_val-.409*(x+y))+l*squash_val*(e+t)-height(voltmax-a):squash_val*(y/squash_val-.409*(x+y))+l*squash_val*(e+t)-height(a)}function height(e){return(t_1-t_0-500)/500*(e+1)*(.8*squash_val*(y/squash_val-.409*(x+y)))/voltmax}function drawWall(e,t,a,l,o){c_2.fillStyle="rgba(0,255,0,0.4)",c_2.beginPath(),c_2.moveTo(coordAndHeight_x(e*x,t*y,o),coordAndHeight_y(e*x,t*y,o)),c_2.lineTo(coordAndHeight_x(a*x,l*y,o),coordAndHeight_y(a*x,l*y,o)),c_2.lineTo(coordAndHeight_x(a*x,l*y,-1),coordAndHeight_y(a*x,l*y,-1)),c_2.lineTo(coordAndHeight_x(e*x,t*y,-1),coordAndHeight_y(e*x,t*y,-1)),c_2.fill(),c_2.closePath()}function drawWallTrap(e,t,a,l,o,s){c_2.fillStyle="rgba(0,255,0,0.4)",c_2.beginPath(),c_2.moveTo(coordAndHeight_x(e*x,t*y,o),coordAndHeight_y(e*x,t*y,o)),c_2.lineTo(coordAndHeight_x(a*x,l*y,s),coordAndHeight_y(a*x,l*y,s)),c_2.lineTo(coordAndHeight_x(a*x,l*y,-1),coordAndHeight_y(a*x,l*y,-1)),c_2.lineTo(coordAndHeight_x(e*x,t*y,-1),coordAndHeight_y(e*x,t*y,-1)),c_2.fill(),c_2.closePath()}function drawHeightLine(e,t,a,l,o){c_2.strokeStyle="green",c_2.beginPath(),c_2.moveTo(coordAndHeight_x(e*x,t*y,o),coordAndHeight_y(e*x,t*y,o)),c_2.lineTo(coordAndHeight_x(a*x,l*y,o),coordAndHeight_y(a*x,l*y,o)),c_2.stroke(),c_2.closePath()}function drawHeightLineTrap(e,t,a,l,o,s){c_2.strokeStyle="green",c_2.beginPath(),c_2.moveTo(coordAndHeight_x(e*x,t*y,o),coordAndHeight_y(e*x,t*y,o)),c_2.lineTo(coordAndHeight_x(a*x,l*y,s),coordAndHeight_y(a*x,l*y,s)),c_2.stroke(),c_2.closePath(),c_2.stroke(),s!=o&&(c_2.setLineDash([5,15]),c_2.beginPath(),c_2.moveTo(coordAndHeight_x(e*x,t*y,-1),coordAndHeight_y(e*x,t*y,-1)),c_2.lineTo(coordAndHeight_x(e*x,t*y,o),coordAndHeight_y(e*x,t*y,o)),c_2.moveTo(coordAndHeight_x(a*x,l*y,-1),coordAndHeight_y(a*x,l*y,-1)),c_2.lineTo(coordAndHeight_x(a*x,l*y,s),coordAndHeight_y(a*x,l*y,s)),c_2.closePath(),c_2.stroke(),c_2.setLineDash([]))}function drawHeightResult(){if(c_2.strokeStyle="green",c_2.lineWidth=3,drawWall(.49,.15,.05,.15,0),drawWall(.05,.15,.05,.85,0),drawWall(.05,.85,.125,.85,0),drawWall(.51,.15,.95,.15,voltmax),drawWall(.95,.15,.95,.85,voltmax),drawWall(.95,.85,.875,.85,voltmax),2==parallels_value)for(var e=0;e<lines_2.length;e++)1==lines_2[e].state&&drawWall(lines_2[e].x_1,lines_2[e].y_1,lines_2[e].x_2,lines_2[e].y_2,voltageWires_2[e]);else if(3==parallels_value)for(e=0;e<lines_3.length;e++)1==lines_3[e].state&&drawWall(lines_3[e].x_1,lines_3[e].y_1,lines_3[e].x_2,lines_3[e].y_2,voltageWires_3[e]);else drawWall(.325,.85,.4,.85,voltage[0]),drawWall(.675,.85,.6,.85,voltage[1]);for(2==parallels_value&&(0==lines_2[2].state&&0==lines_2[7].state&&(voltageRef[5].left=voltageRef[5].right,voltageRef[2].left=voltageRef[2].right),0==lines_2[0].state&&(voltageRef[0].right=0),0==lines_2[1].state&&0==lines_2[2].state&&(voltageRef[1].left=NaN,voltageRef[1].right=NaN),0==lines_2[1].state&&(voltageRef[1].left=voltageRef[1].right),0==lines_2[2].state&&(voltageRef[1].right=voltageRef[1].left),0==lines_2[3].state&&(voltageRef[2].left=voltageRef[2].right),0==lines_2[4].state&&0==lines_2[5].state&&(voltageRef[3].left=NaN,voltageRef[3].right=NaN),0==lines_2[4].state&&1==lines_2[5].state&&(voltageRef[3].left=voltageRef[3].right),1==lines_2[4].state&&0==lines_2[5].state&&(voltageRef[3].right=0),0==lines_2[6].state&&0==lines_2[7].state&&(voltageRef[4].left=NaN,voltageRef[4].right=NaN),0==lines_2[6].state&&(voltageRef[4].left=voltageRef[4].right),0==lines_2[7].state&&(voltageRef[4].right=voltageRef[4].left),0==lines_2[8].state&&0==lines_2[9].state&&(voltageRef[5].left=NaN,voltageRef[5].right=NaN),0==lines_2[8].state&&1==lines_2[9].state&&(voltageRef[5].left=voltageRef[5].right),0==lines_2[9].state&&(voltageRef[5].right=voltageRef[5].left)),3===parallels_value&&(0==lines_3[0].state&&(voltageRef[0].right=voltageRef[0].left),0==lines_3[1].state&&0!=lines_3[2].state&&(voltageRef[1].left=voltageRef[1].right),0!=lines_3[1].state&&0==lines_3[2].state&&(voltageRef[1].right=voltageRef[1].left),0==lines_3[1].state&&0==lines_3[2].state&&(voltageRef[1].right=NaN,voltageRef[1].left=NaN),0==lines_3[3].state&&(voltageRef[2].left=voltageRef[2].right),0==lines_3[4].state&&0!=lines_3[5].state&&(voltageRef[4].left=voltageRef[4].right),0!=lines_3[4].state&&0==lines_3[5].state&&(voltageRef[4].right=voltageRef[4].left),0==lines_3[4].state&&0==lines_3[5].state&&(voltageRef[4].right=NaN,voltageRef[4].left=NaN),0==lines_3[6].state&&0!=lines_3[7].state&&(voltageRef[7].left=voltageRef[7].right),0!=lines_3[6].state&&0==lines_3[7].state&&(voltageRef[7].right=voltageRef[7].left),0==lines_3[6].state&&0==lines_3[7].state&&(voltageRef[7].right=NaN,voltageRef[7].left=NaN)),2==parallels_value||3==parallels_value||(parallels_value=1),e=0;e<3*parallels_value;e++)(3!==parallels_value||3!=e&&5!=e&&6!=e&&8!=e)&&(0==rects[e].state&&drawWallTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),1==rects[e].state&&drawWallTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),2==rects[e].state&&drawWallTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),rects[e].state,4!=rects[e].state&&5!=rects[e].state&&6!=rects[e].state||(drawWallTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+.25*rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].left),drawWallTrap((rects[e].x+.25*rects[e].w)/x,rects[e].y/y+.1,(rects[e].x+.75*rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),drawWallTrap((rects[e].x+.75*rects[e].w)/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].right,voltageRef[e].right)));for(e=0;e<3*parallels_value;e++)(3!==parallels_value||3!=e&&5!=e&&6!=e&&8!=e)&&(0==rects[e].state&&drawHeightLineTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),1==rects[e].state&&drawHeightLineTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),2==rects[e].state&&drawHeightLineTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),rects[e].state,4!=rects[e].state&&5!=rects[e].state&&6!=rects[e].state||(drawHeightLineTrap(rects[e].x/x,rects[e].y/y+.1,(rects[e].x+.25*rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].left),drawHeightLineTrap((rects[e].x+.25*rects[e].w)/x,rects[e].y/y+.1,(rects[e].x+.75*rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].left,voltageRef[e].right),drawHeightLineTrap((rects[e].x+.75*rects[e].w)/x,rects[e].y/y+.1,(rects[e].x+rects[e].w)/x,rects[e].y/y+.1,voltageRef[e].right,voltageRef[e].right)));if(2==parallels_value)for(e=0;e<lines_2.length;e++)1==lines_2[e].state&&drawHeightLine(lines_2[e].x_1,lines_2[e].y_1,lines_2[e].x_2,lines_2[e].y_2,voltageWires_2[e]);else if(3==parallels_value)for(e=0;e<lines_3.length;e++)1==lines_3[e].state&&drawHeightLine(lines_3[e].x_1,lines_3[e].y_1,lines_3[e].x_2,lines_3[e].y_2,voltageWires_3[e]);else drawHeightLine(.325,.85,.4,.85,voltage[0]),drawHeightLine(.675,.85,.6,.85,voltage[1]);c_2.beginPath(),c_2.moveTo(coordAndHeight_x(.49*x,.15*y,0),coordAndHeight_y(.49*x,.15*y,0)),c_2.lineTo(coordAndHeight_x(.05*x,.15*y,0),coordAndHeight_y(.05*x,.15*y,0)),c_2.lineTo(coordAndHeight_x(.05*x,.85*y,0),coordAndHeight_y(.05*x,.85*y,0)),c_2.lineTo(coordAndHeight_x(.125*x,.85*y,0),coordAndHeight_y(.125*x,.85*y,0)),c_2.stroke(),c_2.closePath(),c_2.beginPath(),c_2.moveTo(coordAndHeight_x(.51*x,.15*y,voltmax),coordAndHeight_y(.51*x,.15*y,voltmax)),c_2.lineTo(coordAndHeight_x(.95*x,.15*y,voltmax),coordAndHeight_y(.95*x,.15*y,voltmax)),c_2.lineTo(coordAndHeight_x(.95*x,.85*y,voltmax),coordAndHeight_y(.95*x,.85*y,voltmax)),c_2.lineTo(coordAndHeight_x(.875*x,.85*y,voltmax),coordAndHeight_y(.875*x,.85*y,voltmax)),c_2.stroke(),c_2.closePath()}function colourFromVoltage(e){var t=e/voltmax;if(RB_value||(t=1-t),t>=.5){var a=100*(1.5-t);return a=a.toPrecision(3),1==slow_value?(d_slow=new Date,t_slow=d_slow.getTime(),e==voltmax||e==voltmax/2?"hsl(360, 100%, "+a+"%)":t_slow-t_0<5e3?"hsl(360, 100%, "+(a=(a=100*((a/=100)-(.5-a)*Math.exp(-(t_slow-t_0)/1e3))).toPrecision(3))+"%)":"hsl(360, 100%, "+a+"%)"):"hsl(360, 100%, "+a+"%)"}if(t<.5){var l=100*(.5+t);return l=l.toPrecision(3),1==slow_value?(d_slow=new Date,t_slow=d_slow.getTime(),0==e?"hsl(240, 100%, "+l+"%)":t_slow-t_0<5e3?"hsl(240, 100%, "+(l=(l=100*((l/=100)-(.5-l)*Math.exp(-(t_slow-t_0)/1e3))).toPrecision(3))+"%)":"hsl(240, 100%, "+l+"%)"):"hsl(240, 100%, "+l+"%)"}return"orange"}function drawBoxes(){for(rects[0].x=.125*x,rects[0].y=.75*y,rects[0].w=.2*x,rects[0].h=.2*y,rects[1].x=.4*x,rects[1].y=.75*y,rects[1].w=.2*x,rects[1].h=.2*y,rects[2].x=.675*x,rects[2].y=.75*y,rects[2].w=.2*x,rects[2].h=.2*y,rects[3].x=.125*x,rects[3].y=.5*y,rects[3].w=.2*x,rects[3].h=.2*y,rects[4].x=.4*x,rects[4].y=.5*y,rects[4].w=.2*x,rects[4].h=.2*y,rects[5].x=.675*x,rects[5].y=.5*y,rects[5].w=.2*x,rects[5].h=.2*y,rects[6].x=.125*x,rects[6].y=.25*y,rects[6].w=.2*x,rects[6].h=.2*y,rects[7].x=.4*x,rects[7].y=.25*y,rects[7].w=.2*x,rects[7].h=.2*y,rects[8].x=.675*x,rects[8].y=.25*y,rects[8].w=.2*x,rects[8].h=.2*y,voltageRef=[{left:0,right:voltage[0]},{left:voltage[0],right:voltage[1]},{left:voltage[1],right:voltmax},{left:0,right:voltage[2]},{left:voltage[2],right:voltage[3]},{left:voltage[3],right:voltmax},{left:0,right:voltage[4]},{left:voltage[4],right:voltage[5]},{left:voltage[5],right:voltmax}],2===parallels_value&&(0==lines_2[2].state&&0==lines_2[7].state&&(voltageRef[5].left=voltageRef[5].right,voltageRef[2].left=voltageRef[2].right),0==lines_2[0].state&&(voltageRef[0].right=0),0==lines_2[1].state&&0==lines_2[2].state&&(voltageRef[1].left=NaN,voltageRef[1].right=NaN),0==lines_2[1].state&&(voltageRef[1].left=voltageRef[1].right),0==lines_2[2].state&&(voltageRef[1].right=voltageRef[1].left),0==lines_2[3].state&&(voltageRef[2].left=voltageRef[2].right),0==lines_2[4].state&&0==lines_2[5].state&&(voltageRef[3].left=NaN,voltageRef[3].right=NaN),0==lines_2[4].state&&1==lines_2[5].state&&(voltageRef[3].left=voltageRef[3].right),1==lines_2[4].state&&0==lines_2[5].state&&(voltageRef[3].right=0),0==lines_2[6].state&&0==lines_2[7].state&&(voltageRef[4].left=NaN,voltageRef[4].right=NaN),0==lines_2[6].state&&(voltageRef[4].left=voltageRef[4].right),0==lines_2[7].state&&(voltageRef[4].right=voltageRef[4].left),0==lines_2[8].state&&0==lines_2[9].state&&(voltageRef[5].left=NaN,voltageRef[5].right=NaN),0==lines_2[8].state&&1==lines_2[9].state&&(voltageRef[5].left=voltageRef[5].right),0==lines_2[9].state&&(voltageRef[5].right=voltageRef[5].left)),3===parallels_value&&(0==lines_3[0].state&&(voltageRef[0].right=voltageRef[0].left),0==lines_3[1].state&&0!=lines_3[2].state&&(voltageRef[1].left=voltageRef[1].right),0!=lines_3[1].state&&0==lines_3[2].state&&(voltageRef[1].right=voltageRef[1].left),0==lines_3[1].state&&0==lines_3[2].state&&(voltageRef[1].right=NaN,voltageRef[1].left=NaN),0==lines_3[3].state&&(voltageRef[2].left=voltageRef[2].right),0==lines_3[4].state&&0!=lines_3[5].state&&(voltageRef[4].left=voltageRef[4].right),0!=lines_3[4].state&&0==lines_3[5].state&&(voltageRef[4].right=voltageRef[4].left),0==lines_3[4].state&&0==lines_3[5].state&&(voltageRef[4].right=NaN,voltageRef[4].left=NaN),0==lines_3[6].state&&0!=lines_3[7].state&&(voltageRef[7].left=voltageRef[7].right),0!=lines_3[6].state&&0==lines_3[7].state&&(voltageRef[7].right=voltageRef[7].left),0==lines_3[6].state&&0==lines_3[7].state&&(voltageRef[7].right=NaN,voltageRef[7].left=NaN)),i=0;i<3*parallels_value;i++)if(3!==parallels_value||3!=i&&5!=i&&6!=i&&8!=i){if(c.beginPath(),c.rect(rects[i].x,rects[i].y,rects[i].w,rects[i].h),c.lineWidth=3,c.setLineDash([5,10]),c.strokeStyle="lightblue",c.stroke(),c.closePath(),0==rects[i].state&&(showResults&&radio_button_colour&&(c.strokeStyle=colourFromVoltage(voltageRef[i].right),c.lineWidth=30,c.setLineDash([]),c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath()),c.strokeStyle="black",c.lineWidth=3,c.setLineDash([]),c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath()),1==rects[i].state&&(rects[i].state=3,c.strokeStyle="black",c.setLineDash([]),c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.06)*y),c.moveTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath()),2==rects[i].state){var e=.35*rects[i].h,t=Math.sqrt(.5*e*e);showResults&&radio_button_colour&&(c.strokeStyle=colourFromVoltage(voltageRef[i].left),c.setLineDash([]),c.lineWidth=30,c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.strokeStyle=colourFromVoltage(voltageRef[i].right),c.beginPath(),c.moveTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath()),c.strokeStyle="black",c.lineWidth=3,c.setLineDash([]),c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.arc(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y,e,0,2*Math.PI,!1),c.fillStyle="yellow",c.fill(),c.stroke(),c.closePath(),c.beginPath(),c.moveTo(rects[i].x+.5*rects[i].w-t,rects[i].y+.5*rects[i].h+t),c.lineTo(rects[i].x+.5*rects[i].w+t,rects[i].y+.5*rects[i].h-t),c.stroke(),c.closePath(),c.beginPath(),c.moveTo(rects[i].x+.5*rects[i].w-t,rects[i].y+.5*rects[i].h-t),c.lineTo(rects[i].x+.5*rects[i].w+t,rects[i].y+.5*rects[i].h+t),c.stroke(),c.closePath()}if(3==rects[i].state&&showResults){c.font="30px Arial",c.fillStyle="black";var a=Math.round(100*(voltageRef[i].right-voltageRef[i].left))/100;isNaN(a)||("de"==lang_str?(a=(a=precise(a)).replace(".",","),c.fillText(volt_symb+toSub(i+1)+" = "+a+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y)):c.fillText(volt_symb+toSub(i+1)+" = "+precise(a)+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y))}if(4==rects[i].state){e=.35*rects[i].h,t=Math.sqrt(.5*e*e);if(showResults){radio_button_colour&&(c.strokeStyle=colourFromVoltage(voltageRef[i].left),c.setLineDash([]),c.lineWidth=30,c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.strokeStyle=colourFromVoltage(voltageRef[i].right),c.beginPath(),c.moveTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath()),c.font="30px Arial",c.fillStyle="black";a=Math.round(100*(voltageRef[i].right-voltageRef[i].left))/100;var l=Math.round((voltageRef[i].right-voltageRef[i].left)/50*1e3)/1e3;isNaN(a)||("de"==lang_str?(a=(a=precise(a)).replace(".",","),I_disp=precise(l),I_disp=I_disp.replace(".",","),c.fillText(volt_symb+toSub(i+1)+" = "+a+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y),c.fillText("I"+toSub(i+1)+" = "+I_disp+" A",rects[i].x+.17*rects[i].w,(rects[i].y/y+.04)*y)):(c.fillText(volt_symb+toSub(i+1)+" = "+precise(a)+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y),c.fillText("I"+toSub(i+1)+" = "+precise(l)+" A",rects[i].x+.17*rects[i].w,(rects[i].y/y+.04)*y)))}c.strokeStyle="black",c.lineWidth=3,c.setLineDash([]),c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.rect(rects[i].x+.25*rects[i].w,(rects[i].y/y+.075)*y,rects[i].w/2,rects[i].h/4),c.fillStyle="grey",c.fill(),c.stroke(),c.closePath(),c.fillStyle="black",c.font="30px Arial",c.fillText("50 \u03a9",rects[i].x+.35*rects[i].w,(rects[i].y/y+.11)*y),showResults&&0!=l&&!isNaN(l)&&tech_value&&(c.strokeStyle=arrowcolour,c.setLineDash([]),c.lineWidth=120*l,c.beginPath(),c.moveTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(rects[i].x+.45*rects[i].w,(rects[i].y/y+.15)*y),c.lineTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.45*rects[i].w,(rects[i].y/y+.05)*y),c.stroke(),c.closePath()),!showResults||0==l||isNaN(l)||tech_value||(c.strokeStyle=arrowcolour,c.setLineDash([]),c.lineWidth=120*l,c.beginPath(),c.moveTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(rects[i].x+.55*rects[i].w,(rects[i].y/y+.15)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.55*rects[i].w,(rects[i].y/y+.05)*y),c.stroke(),c.closePath())}if(5==rects[i].state){e=.35*rects[i].h,t=Math.sqrt(.5*e*e);if(showResults){radio_button_colour&&(c.strokeStyle=colourFromVoltage(voltageRef[i].left),c.setLineDash([]),c.lineWidth=30,c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.strokeStyle=colourFromVoltage(voltageRef[i].right),c.beginPath(),c.moveTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath()),c.font="30px Arial",c.fillStyle="black";a=Math.round(100*(voltageRef[i].right-voltageRef[i].left))/100,l=Math.round((voltageRef[i].right-voltageRef[i].left)/100*1e3)/1e3;isNaN(a)||("de"==lang_str?(a=(a=precise(a)).replace(".",","),I_disp=precise(l),I_disp=I_disp.replace(".",","),c.fillText(volt_symb+toSub(1+i)+" = "+a+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y),c.fillText("I"+toSub(i+1)+" = "+I_disp+" A",rects[i].x+.17*rects[i].w,(rects[i].y/y+.04)*y)):(c.fillText(volt_symb+toSub(1+i)+" = "+precise(a)+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y),c.fillText("I"+toSub(i+1)+" = "+precise(l)+" A",rects[i].x+.17*rects[i].w,(rects[i].y/y+.04)*y)))}c.strokeStyle="black",c.lineWidth=3,c.setLineDash([]),c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.rect(rects[i].x+.25*rects[i].w,(rects[i].y/y+.075)*y,rects[i].w/2,rects[i].h/4),c.fillStyle="grey",c.fill(),c.stroke(),c.closePath(),c.fillStyle="black",c.font="30px Arial",c.fillText("100 \u03a9",rects[i].x+.3*rects[i].w,(rects[i].y/y+.11)*y),showResults&&0!=l&&!isNaN(l)&&tech_value&&(c.strokeStyle=arrowcolour,c.setLineDash([]),c.lineWidth=120*l,c.beginPath(),c.moveTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(rects[i].x+.45*rects[i].w,(rects[i].y/y+.15)*y),c.lineTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.45*rects[i].w,(rects[i].y/y+.05)*y),c.stroke(),c.closePath()),!showResults||0==l||isNaN(l)||tech_value||(c.strokeStyle=arrowcolour,c.setLineDash([]),c.lineWidth=120*l,c.beginPath(),c.moveTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(rects[i].x+.55*rects[i].w,(rects[i].y/y+.15)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.55*rects[i].w,(rects[i].y/y+.05)*y),c.stroke(),c.closePath())}if(6==rects[i].state){e=.35*rects[i].h,t=Math.sqrt(.5*e*e);if(showResults){radio_button_colour&&(c.strokeStyle=colourFromVoltage(voltageRef[i].left),c.setLineDash([]),c.lineWidth=30,c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.strokeStyle=colourFromVoltage(voltageRef[i].right),c.beginPath(),c.moveTo(rects[i].x+.5*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath()),c.font="30px Arial",c.fillStyle="black";a=Math.round(100*(voltageRef[i].right-voltageRef[i].left))/100,l=Math.round((voltageRef[i].right-voltageRef[i].left)/150*1e3)/1e3,voltageRef[i].right,voltageRef[i].left;isNaN(a)||("de"==lang_str?(a=(a=precise(a)).replace(".",","),I_disp=precise(l),I_disp=I_disp.replace(".",","),c.fillText(volt_symb+toSub(i+1)+" = "+a+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y),c.fillText("I"+toSub(i+1)+" = "+I_disp+" A",rects[i].x+.17*rects[i].w,(rects[i].y/y+.04)*y)):(c.fillText(volt_symb+toSub(i+1)+" = "+precise(a)+" V",rects[i].x+.05*rects[i].w,(rects[i].y/y+.18)*y),c.fillText("I"+toSub(i+1)+" = "+precise(l)+" A",rects[i].x+.17*rects[i].w,(rects[i].y/y+.04)*y)))}c.strokeStyle="black",c.lineWidth=3,c.setLineDash([]),c.beginPath(),c.moveTo(rects[i].x,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.rect(rects[i].x+.25*rects[i].w,(rects[i].y/y+.075)*y,rects[i].w/2,rects[i].h/4),c.fillStyle="grey",c.fill(),c.stroke(),c.closePath(),c.fillStyle="black",c.font="30px Arial",c.fillText("150 \u03a9",rects[i].x+.3*rects[i].w,(rects[i].y/y+.11)*y),showResults&&0!=l&&!isNaN(l)&&tech_value&&(c.strokeStyle=arrowcolour,c.setLineDash([]),c.lineWidth=120*l,c.beginPath(),c.moveTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(rects[i].x+.45*rects[i].w,(rects[i].y/y+.15)*y),c.lineTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.45*rects[i].w,(rects[i].y/y+.05)*y),c.stroke(),c.closePath()),!showResults||0==l||isNaN(l)||tech_value||(c.strokeStyle=arrowcolour,c.setLineDash([]),c.lineWidth=120*l,c.beginPath(),c.moveTo(rects[i].x+.25*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(rects[i].x+.55*rects[i].w,(rects[i].y/y+.15)*y),c.lineTo(rects[i].x+.75*rects[i].w,(rects[i].y/y+.1)*y),c.lineTo(rects[i].x+.55*rects[i].w,(rects[i].y/y+.05)*y),c.stroke(),c.closePath())}}else;}function animate(){requestAnimationFrame(animate),c.clearRect(0,0,canvas.width,canvas.height),c_2.clearRect(0,0,x,y),c.fillStyle="#E8E8E8",c.fillRect(0,0,canvas.width,canvas.height);var e=radio_button_colour;if(radio_button_colour=document.getElementById("SimTypeColour").checked,radio_button_height=document.getElementById("SimTypeHeight").checked,radio_button_colour!=e&&(showResults=!1),showResults&&drawResults(),drawBackground(),i=0,drawBoxes(),radio_button_height&&drawHeightResult(),I_tot=voltmax/totalResistance,isNaN(I_tot)&&(I_tot=0),showResults&&0!=I_tot){if(ZeroPos_value){if("en"==lang_str)var t="0 V",a=voltmax.toString()+" V";if("de"==lang_str)t="0 V",a=voltmax.toString().replace(".",",")+" V"}if(!ZeroPos_value){if("en"==lang_str)t="-"+(a=(voltmax/2).toString()+" V");if("de"==lang_str)t="-"+(a=(voltmax/2).toString().replace(".",",")+" V")}var l;if(tech_value)if(c.strokeStyle=arrowcolour,c.setLineDash([]),c.lineWidth=120*I_tot,c.beginPath(),c.moveTo(.65*x,.15*y),c.lineTo(.75*x,.15*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(.7*x,.1*y),c.lineTo(.75*x,.15*y),c.lineTo(.7*x,.2*y),c.stroke(),c.closePath(),radio_button_colour)(l=c.createLinearGradient(.1*x,0,.35*x,0)).addColorStop(0,colourFromVoltage(0)),l.addColorStop(.5,"white"),l.addColorStop(1,colourFromVoltage(voltmax)),c.fillText(t,.08*x,.045*y),c.fillText(a,.32*x,.045*y),c.fillStyle=l,c.fillRect(.1*x,.05*y,.25*x,.05*y);if(!tech_value)if(c.strokeStyle=arrowcolour,c.setLineDash([]),c.setLineDash([]),c.lineWidth=120*I_tot,c.beginPath(),c.moveTo(.35*x,.15*y),c.lineTo(.25*x,.15*y),c.stroke(),c.closePath(),c.beginPath(),c.lineTo(.3*x,.1*y),c.lineTo(.25*x,.15*y),c.lineTo(.3*x,.2*y),c.stroke(),c.closePath(),radio_button_colour)(l=c.createLinearGradient(.65*x,0,.9*x,0)).addColorStop(0,colourFromVoltage(0)),l.addColorStop(.5,"white"),l.addColorStop(1,colourFromVoltage(voltmax)),c.fillText(t,.62*x,.045*y),c.fillText(a,.87*x,.045*y),c.fillStyle=l,c.fillRect(.65*x,.05*y,.25*x,.05*y);I_tot*=1e3,I_tot=Math.round(I_tot),I_tot/=1e3,c.font="30px Arial",c.fillStyle="black","de"==lang_str?(I_tot_disp=precise(I_tot),I_tot_disp=I_tot_disp.replace(".",",")):I_tot_disp=precise(I_tot),tech_value?c.fillText("I\u2080 = "+I_tot_disp+" A",.65*x,.05*y):c.fillText("I\u2080 = "+I_tot_disp+" A",.2*x,.05*y)}}function initialise(){c.canvas.width=window.innerWidth,c.canvas.height=window.innerHeight-150,c_2.canvas.width=window.innerWidth,c_2.canvas.height=window.innerHeight-150,showResults=!1,transformed=!1,x=canvas.width,y=canvas.height,document.getElementById("canvas").addEventListener("mousedown",doMouseDown,!1),document.getElementById("startAnimation").addEventListener("click",makeResults,!1),document.getElementById("stopAnimation").addEventListener("click",onStop,!1),canvas_2.style.zIndex=-1,lang_str=(lang_str=lang.options[lang.selectedIndex].value).substring(11,13)}function onStop(){transformed&&(c.resetTransform(),transformed=!1),showResults=!1,canvas_2.style.zIndex=-1}function doMouseDown(e){showResults=!1,e.preventDefault();var t=canvas.getBoundingClientRect(),a=e.clientX-t.left;const l=e.clientY-t.top;for(var o=0;o<3*parallels_value;o++)a>rects[o].x&&a<rects[o].x+rects[o].w&&l>rects[o].y&&l<rects[o].y+rects[o].h&&(rects[o].state++,rects[o].state>6&&(rects[o].state=0));if(2===parallels_value)for(var s=0;s<lines_2.length;s++){var i=5;a>lines_2[s].x_1*x-i&&a<lines_2[s].x_2*x+i&&l>lines_2[s].y_1*y-i&&l<lines_2[s].y_2*y+i&&(lines_2[s].state++,lines_2[s].state>1&&(lines_2[s].state=0))}if(3===parallels_value)for(s=0;s<lines_3.length;s++){i=5;a>lines_3[s].x_1*x-i&&a<lines_3[s].x_2*x+i&&l>lines_3[s].y_1*y-i&&l<lines_3[s].y_2*y+i&&(lines_3[s].state++,lines_3[s].state>1&&(lines_3[s].state=0))}}function makeResults(){if(d_0=new Date,t_0=d_0.getTime(),showResults=!0,1===parallels_value){var e=[0,0,0],t=0;for(i=0;i<3;i++)2==rects[i].state&&(e[i]=1),0==rects[i].state&&(e[i]=0),3==rects[i].state&&(e[i]=NaN),4==rects[i].state&&(e[i]=50),5==rects[i].state&&(e[i]=100),6==rects[i].state&&(e[i]=150);for(i=0;i<3;i++)isNaN(e[i])&&(t+=1);if(t>0)1==t&&(isNaN(e[0])&&(voltage[0]=voltmax,voltage[1]=voltmax),isNaN(e[1])&&(voltage[0]=0,voltage[1]=voltmax),isNaN(e[2])&&(voltage[0]=0,voltage[1]=0)),2==t&&(isNaN(e[0])&&isNaN(e[1])&&(voltage[0]=NaN,voltage[1]=voltmax),isNaN(e[0])&&isNaN(e[2])&&(voltage[0]=NaN,voltage[1]=NaN),
isNaN(e[1])&&isNaN(e[2])&&(voltage[0]=0,voltage[1]=NaN)),3==t&&(voltage[0]=NaN,voltage[1]=NaN);else if(0==t){var a=e.reduce(((e,t)=>e+t),0);0==a?(window.alert(warning),showResults=!1):(voltage[1]=voltmax*(1-e[2]/a),voltage[0]=voltmax*(1-(e[1]+e[2])/a))}totalResistance=e[0]+e[1]+e[2]}if(2==parallels_value){e=[0,0,0,0,0,0];var l=new Array(12);for(i=0;i<12;i++)l[i]=lines_2[i].state;if(0==l[0]||3==rects[0].state?e[0]=NaN:1==l[0]&&2==rects[0].state?e[0]=1:1==l[0]&&4==rects[0].state?e[0]=50:1==l[0]&&5==rects[0].state?e[0]=100:1==l[0]&&6==rects[0].state&&(e[0]=150),0==l[1]||0==l[2]||3==rects[1].state?e[1]=NaN:1==l[1]&&1==l[2]&&2==rects[1].state?e[1]=1:1==l[1]&&1==l[2]&&4==rects[1].state?e[1]=50:1==l[1]&&1==l[2]&&5==rects[1].state?e[1]=100:1==l[1]&&1==l[2]&&6==rects[1].state&&(e[1]=150),0==l[3]||3==rects[2].state?e[2]=NaN:1==l[3]&&2==rects[2].state?e[2]=1:1==l[3]&&4==rects[2].state?e[2]=50:1==l[3]&&5==rects[2].state?e[2]=100:1==l[3]&&6==rects[2].state&&(e[2]=150),0==l[4]||0==l[5]||3==rects[3].state?e[3]=NaN:1==l[4]&&1==l[5]&&2==rects[3].state?e[3]=1:1==l[4]&&1==l[5]&&4==rects[3].state?e[3]=50:1==l[4]&&1==l[5]&&5==rects[3].state?e[3]=100:1==l[4]&&1==l[5]&&6==rects[3].state&&(e[3]=150),0==l[6]||0==l[7]||3==rects[4].state?e[4]=NaN:1==l[6]&&1==l[7]&&2==rects[4].state?e[4]=1:1==l[6]&&1==l[7]&&4==rects[4].state?e[4]=50:1==l[6]&&1==l[7]&&5==rects[4].state?e[4]=100:1==l[6]&&1==l[7]&&6==rects[4].state&&(e[4]=150),0==l[8]||0==l[9]||3==rects[5].state?e[5]=NaN:1==l[8]&&1==l[9]&&2==rects[5].state?e[5]=1:1==l[8]&&1==l[9]&&4==rects[5].state?e[5]=50:1==l[8]&&1==l[9]&&5==rects[5].state?e[5]=100:1==l[8]&&1==l[9]&&6==rects[5].state&&(e[5]=150),0==l[10]&&0==l[11]){var o=0,s=0;for(e[0]+e[1]+e[2]!=0&&e[3]+e[4]+e[5]!=0||(window.alert("Short Circuit"),showResults=!1),i=0;i<3;i++)isNaN(e[i])&&(o+=1),isNaN(e[i+3])&&(s+=1);1==o&&(isNaN(e[0])&&(voltage[0]=voltmax,voltage[1]=voltmax),isNaN(e[1])&&(voltage[0]=0,voltage[1]=voltmax),isNaN(e[2])&&(voltage[0]=0,voltage[1]=0)),2==o&&(isNaN(e[0])&&isNaN(e[1])&&(voltage[0]=NaN,voltage[1]=voltmax),isNaN(e[0])&&isNaN(e[2])&&(voltage[0]=NaN,voltage[1]=NaN),isNaN(e[1])&&isNaN(e[2])&&(voltage[0]=0,voltage[1]=NaN)),3==o&&(voltage[0]=NaN,voltage[1]=NaN),1==s&&(isNaN(e[3])&&(voltage[2]=voltmax,voltage[3]=voltmax),isNaN(e[4])&&(voltage[2]=0,voltage[3]=voltmax),isNaN(e[5])&&(voltage[2]=0,voltage[3]=0)),2==s&&(isNaN(e[3])&&isNaN(e[4])&&(voltage[2]=NaN,voltage[3]=voltmax),isNaN(e[3])&&isNaN(e[5])&&(voltage[2]=NaN,voltage[3]=NaN),isNaN(e[4])&&isNaN(e[5])&&(voltage[2]=0,voltage[3]=NaN)),3==s&&(voltage[2]=NaN,voltage[3]=NaN);var c=e[0]+e[1]+e[2],r=e[3]+e[4]+e[5];0==o&&(voltage[1]=voltmax*(1-e[2]/c),voltage[0]=voltmax*(1-(e[1]+e[2])/c)),0==s&&(voltage[3]=voltmax*(1-e[5]/r),voltage[2]=voltmax*(1-(e[4]+e[5])/r)),0==o&&0==s?totalResistance=1/(1/c+1/r):0!=o&&0==s?totalResistance=r:0==o&&0!=s&&(totalResistance=c)}if(1==l[10]&&1==l[11]){var g=[0,0,0],v=!1,n=!1,y=!1;0!=e[5]&&0!=e[2]||(y=!0),0!=e[4]&&0!=e[1]||(n=!0),0!=e[3]&&0!=e[0]||(v=!0),v&&n&&y&&(window.alert("Short Circuit"),showResults=!1);var _=0;for(i=0;i<3;i++)0==e[i]||0==e[i+3]?g[i]=0:isNaN(e[i])&&isNaN(e[i+3])?g[i]=NaN:isNaN(e[i])||isNaN(e[i+3])?0!=e[i]&&0!=e[i+3]?(isNaN(e[i])&&(g[i]=e[i+3]),isNaN(e[i+3])&&(g[i]=e[i])):0!=e[i]&&0!=e[i+3]||(g[i]=0):isNaN(e[i])&&0==e[i]||isNaN(e[i+3])&&0==e[i+3]?window.alert("Case Not Considered."):g[i]=1/(1/e[i]+1/e[i+3]),_+=g[i];isNaN(g[0])&&isNaN(g[1])&&isNaN(g[2])||isNaN(g[0])&&isNaN(g[2])?(voltage[0]=NaN,voltage[1]=NaN,voltage[2]=NaN,voltage[3]=NaN):isNaN(g[1])&&isNaN(g[2])?(voltage[0]=0,voltage[1]=0,voltage[2]=NaN,voltage[3]=NaN):isNaN(g[0])&&isNaN(g[1])?(voltage[0]=NaN,voltage[1]=NaN,voltage[2]=voltmax,voltage[3]=voltmax):isNaN(g[0])?(voltage[0]=voltmax,voltage[1]=voltmax,voltage[2]=voltmax,voltage[3]=voltmax):isNaN(g[1])?(voltage[0]=0,voltage[1]=voltmax,voltage[2]=0,voltage[3]=voltmax):isNaN(g[2])?(voltage[0]=0,voltage[1]=0,voltage[2]=0,voltage[3]=0):(voltage[0]=voltmax*(g[0]/_),voltage[1]=voltmax*((g[0]+g[1])/_),voltage[2]=voltage[0],voltage[3]=voltage[1]),totalResistance=_}if(1==l[10]&&0==l[11])N=1/(1/e[0]+1/e[3]),totalResistance=N+1/(1/(e[4]+e[5])+1/(e[1]+e[2])),0!=e[0]&&0!=e[3]||!(0==e[1]&&0==e[2]||0==e[4]&&0==e[5])||(window.alert(warning),showResults=!1),isNaN(totalResistance)?isNaN(e[0])&&!isNaN(e[3])?(N=e[3],totalResistance=N+1/(1/(e[4]+e[5])+1/(e[1]+e[2])),voltage[0]=voltmax*(N/totalResistance),voltage[1]=voltage[0]+e[1]/(e[1]+e[2])*(voltmax-voltage[0]),voltage[2]=voltage[0],voltage[3]=voltage[0]+e[4]/(e[4]+e[5])*(voltmax-voltage[0]),(isNaN(e[1])||isNaN(e[2]))&&(totalResistance=N+e[4]+e[5],voltage[0]=voltmax*N/totalResistance,voltage[2]=voltage[0],voltage[3]=voltage[0]+e[4]/(e[4]+e[5])*(voltmax-voltage[0]),0==e[4]&&0==e[5]&&(voltage[3]=voltmax),isNaN(e[1])&&isNaN(e[2])?voltage[1]=NaN:isNaN(e[1])?voltage[1]=voltmax:voltage[1]=voltage[0]),(isNaN(e[4])||isNaN(e[5]))&&(totalResistance=N+e[1]+e[2],voltage[0]=voltmax*N/totalResistance,voltage[1]=voltage[0]+e[1]/(e[1]+e[2])*(voltmax-voltage[0]),voltage[2]=voltage[0],isNaN(e[4])&&isNaN(e[5])?voltage[3]=NaN:isNaN(e[4])?voltage[3]=voltmax:voltage[3]=voltage[2]),(0==e[1]&&0==e[2]||0==e[5]&&0==e[4])&&(voltage[1]=voltmax,voltage[0]=voltmax,voltage[2]=voltmax,voltage[3]=voltmax)):isNaN(e[3])&&!isNaN(e[0])?(N=e[0],totalResistance=N+1/(1/(e[4]+e[5])+1/(e[1]+e[2])),voltage[0]=voltmax*N/totalResistance,voltage[1]=voltage[0]+e[1]/(e[1]+e[2])*(voltmax-voltage[0]),voltage[2]=voltage[0],voltage[3]=voltage[0]+e[4]/(e[4]+e[5])*(voltmax-voltage[0]),(isNaN(e[1])||isNaN(e[2]))&&(totalResistance=N+e[4]+e[5],voltage[0]=voltmax*N/totalResistance,voltage[2]=voltage[0],voltage[3]=voltage[0]+e[4]/(e[4]+e[5])*(voltmax-voltage[0]),0==e[4]&&0==e[5]&&(voltage[3]=voltmax),isNaN(e[1])&&isNaN(e[2])?voltage[1]=NaN:isNaN(e[1])?voltage[1]=voltmax:voltage[1]=voltage[0]),(isNaN(e[4])||isNaN(e[5]))&&(totalResistance=N+e[1]+e[2],voltage[0]=voltmax*N/totalResistance,voltage[1]=voltage[0]+e[1]/(e[1]+e[2])*(voltmax-voltage[0]),voltage[2]=voltage[0],isNaN(e[4])&&isNaN(e[5])?voltage[3]=NaN:isNaN(e[4])?voltage[3]=voltmax:voltage[3]=voltage[2]),(0==e[1]&&0==e[2]||0==e[5]&&0==e[4])&&(voltage[1]=voltmax,voltage[0]=voltmax,voltage[2]=voltmax,voltage[3]=voltmax)):isNaN(e[3])&&isNaN(e[0])?(voltage[0]=voltmax,voltage[1]=voltmax,voltage[2]=voltmax,voltage[3]=voltmax):isNaN(e[3])||isNaN(e[0])?window.alert("Case not considered or Open Circuit"):(N=1/(1/e[0]+1/e[3]),0!=e[0]&&0!=e[3]||(N=0),(isNaN(e[1])||isNaN(e[2]))&&(totalResistance=N+e[4]+e[5],voltage[0]=voltmax*N/totalResistance,voltage[2]=voltage[0],voltage[3]=voltage[0]+e[4]/(e[4]+e[5])*(voltmax-voltage[0]),isNaN(e[1])&&isNaN(e[2])?voltage[1]=NaN:isNaN(e[1])?voltage[1]=voltmax:voltage[1]=voltage[0]),(isNaN(e[4])||isNaN(e[5]))&&(totalResistance=N+e[1]+e[2],voltage[0]=voltmax*N/totalResistance,voltage[1]=voltage[0]+e[1]/(e[1]+e[2])*(voltmax-voltage[0]),voltage[2]=voltage[0],isNaN(e[4])&&isNaN(e[5])?voltage[3]=NaN:isNaN(e[4])?voltage[3]=voltmax:voltage[3]=voltage[2])):(N=1/(1/e[0]+1/e[3]),totalResistance=N+1/(1/(e[4]+e[5])+1/(e[1]+e[2])),voltage[0]=voltmax*N/totalResistance,voltage[1]=voltage[0]+e[1]/(e[1]+e[2])*(voltmax-voltage[0]),voltage[2]=voltage[0],voltage[3]=voltage[0]+e[4]/(e[4]+e[5])*(voltmax-voltage[0]),0==e[1]&&0==e[2]?(voltage[0]=voltmax,voltage[2]=voltmax,voltage[1]=voltmax,voltage[3]=voltage[0]+e[4]/(e[4]+e[5])*(1-voltage[0])):0==e[4]&&0==e[5]&&(voltage[0]=voltmax,voltage[2]=voltmax,voltage[1]=voltage[0]+e[1]/(e[1]+e[2])*(1-voltage[0]),voltage[3]=voltmax)),(isNaN(e[1])||isNaN(e[2]))&&(isNaN(e[4])||isNaN(e[5]))&&(voltage[0]=0,voltage[2]=0,isNaN(e[1])&&isNaN(e[2])?voltage[1]=NaN:isNaN(e[1])?voltage[1]=voltmax:voltage[1]=0,isNaN(e[4])&&isNaN(e[5])?voltage[3]=NaN:isNaN(e[4])?voltage[3]=voltmax:voltage[3]=0);if(0==l[10]&&1==l[11])N=1/(1/e[2]+1/e[5]),res_para_bot=e[0]+e[1],res_para_top=e[3]+e[4],isNaN(res_para_bot)||isNaN(res_para_top)||(totalResistance=N+1/(1/res_para_bot+1/res_para_top)),isNaN(res_para_bot)&&!isNaN(res_para_top)&&(totalResistance=N+res_para_top),!isNaN(res_para_bot)&&isNaN(res_para_top)&&(totalResistance=N+res_para_bot),0!=e[2]&&0!=e[5]||!(0==e[0]&&0==e[1]||0==e[3]&&0==e[4])||(window.alert("Short Circuit"),showResults=!1),isNaN(totalResistance)?isNaN(e[2])&&!isNaN(e[5])?(N=e[5],totalResistance=N+1/(1/(e[0]+e[1])+1/(e[3]+e[4])),voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[0]=voltage[1]*(1-e[1]/(e[1]+e[0])),voltage[2]=voltage[3]*(1-e[4]/(e[3]+e[4])),(isNaN(e[0])||isNaN(e[1]))&&(totalResistance=N+e[3]+e[4],voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[2]=voltage[3]*(1-e[4]/(e[3]+e[4])),isNaN(e[0])&&isNaN(e[1])?voltage[0]=NaN:isNaN(e[1])?voltage[0]=0:voltage[0]=voltage[1]),(isNaN(e[3])||isNaN(e[4]))&&(totalResistance=N+e[0]+e[1],voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[0]=voltage[1]*(1-e[1]/(e[1]+e[0])),isNaN(e[3])&&isNaN(e[4])?voltage[2]=NaN:isNaN(e[4])?voltage[2]=0:voltage[2]=voltage[3]),(0==e[0]&&0==e[1]||0==e[3]&&0==e[4])&&(voltage[0]=0,voltage[1]=0,voltage[2]=0,voltage[3]=0)):isNaN(e[5])&&!isNaN(e[2])?(N=e[2],totalResistance=N+1/(1/(e[0]+e[1])+1/(e[3]+e[4])),voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[0]=voltage[1]*(1-e[1]/(e[1]+e[0])),voltage[2]=voltage[3]*(1-e[4]/(e[3]+e[4])),(isNaN(e[0])||isNaN(e[1]))&&(totalResistance=N+e[3]+e[4],voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[2]=voltage[3]*(1-e[4]/(e[3]+e[4])),isNaN(e[0])&&isNaN(e[1])?voltage[0]=NaN:isNaN(e[1])?voltage[0]=0:voltage[0]=voltage[1]),(isNaN(e[3])||isNaN(e[4]))&&(totalResistance=N+e[0]+e[1],voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[0]=voltage[1]*(1-e[1]/(e[1]+e[0])),isNaN(e[3])&&isNaN(e[4])?voltage[2]=NaN:isNaN(e[4])?voltage[2]=0:voltage[2]=voltage[3]),(0==e[0]&&0==e[1]||0==e[3]&&0==e[4])&&(voltage[0]=0,voltage[1]=0,voltage[2]=0,voltage[3]=0)):isNaN(e[2])&&isNaN(e[5])?(voltage[0]=0,voltage[1]=0,voltage[2]=0,voltage[3]=0):isNaN(e[5])||isNaN(e[2])?window.alert("Case not considered or Open Circuit"):(N=1/(1/e[5]+1/e[2]),0!=e[2]&&0!=e[5]||(N=0),(isNaN(e[1])||isNaN(e[0]))&&(totalResistance=N+e[3]+e[4],voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[2]=voltage[1]*(e[3]/(e[3]+e[4])),isNaN(e[0])&&isNaN(e[1])?voltage[0]=NaN:isNaN(e[1])?voltage[0]=0:voltage[0]=voltage[1]),(isNaN(e[4])||isNaN(e[3]))&&(totalResistance=N+e[0]+e[1],voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[0]=voltage[1]*(e[0]/(e[1]+e[0])),isNaN(e[3])&&isNaN(e[4])?voltage[2]=NaN:isNaN(e[4])?voltage[2]=0:voltage[2]=voltage[3])):(voltage[1]=voltmax*(1-N/totalResistance),voltage[3]=voltage[1],voltage[0]=voltage[1]*(1-e[1]/(e[1]+e[0])),voltage[2]=voltage[3]*(1-e[4]/(e[3]+e[4])),0==e[0]&&0==e[1]?(voltage[0]=0,voltage[3]=0,voltage[1]=0,voltage[2]=0):0==e[4]&&0==e[3]&&(voltage[0]=0,voltage[2]=0,voltage[1]=0,voltage[3]=0)),(isNaN(e[0])||isNaN(e[1]))&&(isNaN(e[3])||isNaN(e[4]))&&(voltage[1]=voltmax,voltage[3]=voltmax,isNaN(e[0])&&isNaN(e[1])?voltage[0]=NaN:isNaN(e[1])?voltage[0]=0:voltage[0]=voltmax,isNaN(e[3])&&isNaN(e[4])?voltage[2]=NaN:isNaN(e[4])?voltage[2]=0:voltage[2]=voltmax)}if(3==parallels_value){e=[0,0,0,0,0],l=new Array(lines_3.length);var N=0;for(i=0;i<lines_3.length;i++)l[i]=lines_3[i].state;0==l[0]||3==rects[0].state?e[0]=NaN:1==l[0]&&2==rects[0].state?e[0]=1:1==l[0]&&4==rects[0].state?e[0]=50:1==l[0]&&5==rects[0].state?e[0]=100:1==l[0]&&6==rects[0].state&&(e[0]=150),0==l[1]||0==l[2]||3==rects[1].state?e[1]=NaN:1==l[1]&&1==l[2]&&2==rects[1].state?e[1]=1:1==l[1]&&1==l[2]&&4==rects[1].state?e[1]=50:1==l[1]&&1==l[2]&&5==rects[1].state?e[1]=100:1==l[1]&&1==l[2]&&6==rects[1].state&&(e[1]=150),0==l[3]||3==rects[2].state?e[2]=NaN:1==l[3]&&2==rects[2].state?e[2]=1:1==l[3]&&4==rects[2].state?e[2]=50:1==l[3]&&5==rects[2].state?e[2]=100:1==l[3]&&6==rects[2].state&&(e[2]=150),0==l[4]||0==l[5]||3==rects[4].state?e[3]=NaN:1==l[4]&&1==l[5]&&2==rects[4].state?e[3]=1:1==l[4]&&1==l[5]&&4==rects[4].state?e[3]=50:1==l[4]&&1==l[5]&&5==rects[4].state?e[3]=100:1==l[4]&&1==l[5]&&6==rects[4].state&&(e[3]=150),0==l[6]||0==l[7]||3==rects[7].state?e[4]=NaN:1==l[6]&&1==l[7]&&2==rects[7].state?e[4]=1:1==l[6]&&1==l[7]&&4==rects[7].state?e[4]=50:1==l[6]&&1==l[7]&&5==rects[7].state?e[4]=100:1==l[6]&&1==l[7]&&6==rects[7].state&&(e[4]=150);var x=0;N=0;0==e[1]||1==l[8]&&1==l[9]&&0==e[3]||1==l[8]&&1==l[9]&&1==l[10]&&1==l[11]&&0==e[4]?N=0:isNaN(e[1])&&isNaN(e[3])&&isNaN(e[4])?(N=NaN,isNaN(e[0])&&!isNaN(e[2])&&(voltage[0]=NaN,voltage[1]=voltmax,voltage[2]=NaN,voltage[3]=voltmax,voltage[4]=NaN,voltage[5]=voltmax),!isNaN(e[0])&&isNaN(e[2])&&(voltage[0]=0,voltage[1]=NaN,voltage[2]=0,voltage[3]=NaN,voltage[4]=0,voltage[5]=NaN),isNaN(e[0])||isNaN(e[2])||(voltage[0]=0,voltage[1]=voltmax,voltage[2]=0,voltage[3]=voltmax,voltage[4]=0,voltage[5]=voltmax),isNaN(e[0])&&isNaN(e[2])&&(voltage[0]=NaN,voltage[1]=NaN,voltage[2]=NaN,voltage[3]=NaN,voltage[4]=NaN,voltage[5]=NaN)):(isNaN(e[1])||(x+=1/e[1]),isNaN(e[3])||1!=l[8]||1!=l[9]||(x+=1/e[3]),isNaN(e[4])||1!=l[10]||1!=l[11]||1!=l[8]||1!=l[9]||(x+=1/e[4]),N=1/x),0==(totalResistance=e[0]+N+e[2])&&(window.alert(warning),showResults=!1),isNaN(totalResistance)&&!isNaN(N)?(isNaN(e[0])&&isNaN(e[2])&&(voltage[0]=NaN,voltage[1]=NaN,voltage[2]=NaN,voltage[3]=NaN,voltage[4]=NaN,voltage[5]=NaN),isNaN(e[0])&&!isNaN(e[2])&&(voltage[0]=voltmax,voltage[1]=voltmax,voltage[2]=voltmax,voltage[3]=voltmax,voltage[4]=voltmax,voltage[5]=voltmax),!isNaN(e[0])&&isNaN(e[2])&&(voltage[0]=0,voltage[1]=0,voltage[2]=0,voltage[3]=0,voltage[4]=0,voltage[5]=0)):isNaN(totalResistance)||isNaN(N)||(voltage[1]=voltmax*(1-e[2]/totalResistance),voltage[0]=voltmax*(1-(e[2]+N)/totalResistance)),0==l[8]&&0!=l[9]?(N=e[1],totalResistance=e[0]+N+e[2],voltage[1]=voltmax*(1-e[2]/totalResistance),voltage[0]=voltmax*(1-(e[2]+N)/totalResistance),voltage[2]=voltage[1],voltage[3]=voltage[1],voltage[4]=voltage[1],voltage[5]=voltage[1]):0!=l[8]&&0==l[9]?(N=e[1],totalResistance=e[0]+N+e[2],voltage[1]=voltmax*(1-e[2]/totalResistance),voltage[0]=voltmax*(1-(e[2]+N)/totalResistance),voltage[2]=voltage[0],voltage[3]=voltage[0],voltage[4]=voltage[0],voltage[5]=voltage[0]):0==l[8]&&0==l[9]?(N=e[1],totalResistance=e[0]+N+e[2],voltage[1]=voltmax*(1-e[2]/totalResistance),voltage[0]=voltmax*(1-(e[2]+N)/totalResistance),voltage[2]=NaN,voltage[3]=NaN,voltage[4]=NaN,voltage[5]=NaN):(voltage[2]=voltage[0],voltage[3]=voltage[1],voltage[4]=voltage[0],voltage[5]=voltage[1]),0==l[10]&&0!=l[11]?(voltage[4]=voltage[3],voltage[5]=voltage[3]):0!=l[10]&&0==l[11]?(voltage[4]=voltage[2],voltage[5]=voltage[2]):0==l[10]&&0==l[11]&&(voltage[4]=NaN,voltage[5]=NaN),0==l[8]&&0==l[9]&&isNaN(e[1])&&(voltage[0]=0,voltage[1]=voltmax,voltage[2]=NaN,voltage[3]=NaN,voltage[4]=NaN,voltage[5]=NaN,isNaN(e[2])&&(voltage[1]=NaN),isNaN(e[0])&&(voltage[0]=NaN)),!isNaN(N)||isNaN(e[2])&&isNaN(e[0])||(voltage[0]=0,voltage[1]=voltmax,1==l[8]&&(voltage[2]=voltage[0],isNaN(e[3])||isNaN(voltage[2])||(voltage[3]=voltage[2])),1==l[9]&&(voltage[3]=voltage[1],isNaN(e[3])||isNaN(voltage[3])||(voltage[2]=voltage[3])),1==l[10]&&(voltage[4]=voltage[2],isNaN(e[4])||isNaN(voltage[4])||(voltage[5]=voltage[4])),1==l[11]&&(isNaN(voltage[3])||(voltage[5]=voltage[3]),isNaN(e[4])||isNaN(voltage[5])||(voltage[4]=voltage[5])),!isNaN(voltage[4])&&1==l[10]&&isNaN(e[3])&&(voltage[2]=voltage[4]),!isNaN(voltage[5])&&1==l[11]&&isNaN(e[3])&&(voltage[3]=voltage[5]))}if(radio_button_colour);if(radio_button_height);}var canvas=document.getElementById("canvas"),canvas_2=document.getElementById("canvas_2"),voltmax=4.5,precision=2,arrowcolour="rgba(0,255,0,0.7)",img=new Image;img.src="https://cdn.onlinewebfonts.com/svg/img_431207.png";var lang=document.getElementById("lang_input"),lang_str=lang.options[lang.selectedIndex].value;lang_str=lang_str.substring(11,13);var d_0,t_0,d_1,t_1,volt_symb="",warning="";"en"==lang_str&&(volt_symb="V",slow_text="Slow Mo",warning="Short Circuit!"),"de"==lang_str&&(volt_symb="U",slow_text="Zeitlupe",warning="Kurzschluss!");var x=canvas.width,y=canvas.height,x_squash=0,y_squash=0,squash_val=0,I_tot=0;window.addEventListener("resize",initialise);var c=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight-150;var c_2=canvas_2.getContext("2d");canvas_2.width=window.innerWidth,canvas_2.height=window.innerHeight-150,c.fillStyle="rgba(200,200,200,1)",c.fillRect(0,0,c.canvas.width,c.canvas.height),canvas_2.addEventListener("click",onStop);var totalResistance,parallels_1=document.getElementById("NoWires1"),parallels_2=document.getElementById("NoWires2"),parallels_3=document.getElementById("NoWires3"),parallels_value=1,voltages=document.getElementById("voltages"),phys=document.getElementById("phys"),tech=document.getElementById("tech"),RB=document.getElementById("RotBlau"),BR=document.getElementById("BlauRot"),RB_value=!0,PosHigh=document.getElementById("PosHigh"),NegHigh=document.getElementById("NegHigh"),PosHigh_value=!0,NegPos=document.getElementById("NegPos"),ZeroPos=document.getElementById("ZeroPos"),ZeroPos_value=!0,tech_value=!0,slow_button=document.getElementById("slow"),fast_button=document.getElementById("fast"),slow_value=!1,voltage=[NaN,NaN,NaN,NaN,NaN,NaN],showResults=!1,transformed=!1,radio_button_colour=document.getElementById("SimTypeColour").checked,radio_button_height=document.getElementById("SimTypeHeight").checked,voltageWires_2=[voltage[0],voltage[0],voltage[1],voltage[1],0,voltage[2],voltage[2],voltage[3],voltage[3],voltmax,voltage[0],voltage[1]],voltageWires_3=[0,0,0,0,0,0,0,0,0,0,0,0],voltageRef=[{left:voltmax,right:voltage[0]},{left:voltage[0],right:voltage[1]},{left:voltage[1],right:voltmax},{left:0,right:voltage[2]},{left:voltage[2],right:voltage[3]},{left:voltage[3],right:voltmax},{left:0,right:voltage[4]},{left:voltage[4],right:voltage[5]},{left:voltage[5],right:voltmax}],lines_2=[{x_1:.325,y_1:.85,x_2:.3625,y_2:.85,ident:1,state:1},{x_1:.3625,y_1:.85,x_2:.4,y_2:.85,ident:2,state:1},{x_1:.6,y_1:.85,x_2:.6375,y_2:.85,ident:3,state:1},{x_1:.6375,y_1:.85,x_2:.675,y_2:.85,ident:4,state:1},{x_1:.05,y_1:.6,x_2:.125,y_2:.6,ident:5,state:1},{x_1:.325,y_1:.6,x_2:.3625,y_2:.6,ident:6,state:1},{x_1:.3625,y_1:.6,x_2:.4,y_2:.6,ident:7,state:1},{x_1:.6,y_1:.6,x_2:.6375,y_2:.6,ident:8,state:1},{x_1:.6375,y_1:.6,x_2:.675,y_2:.6,ident:9,state:1},{x_1:.875,y_1:.6,x_2:.95,y_2:.6,ident:10,state:1},{x_1:.3625,y_1:.6,x_2:.3625,y_2:.85,ident:17,state:1},{x_1:.6375,y_1:.6,x_2:.6375,y_2:.85,ident:18,state:1}],lines_3=[{x_1:.325,y_1:.85,x_2:.3625,y_2:.85,ident:0,state:1},{x_1:.3625,y_1:.85,x_2:.4,y_2:.85,ident:1,state:1},{x_1:.6,y_1:.85,x_2:.6375,y_2:.85,ident:2,state:1},{x_1:.6375,y_1:.85,x_2:.675,y_2:.85,ident:3,state:1},{x_1:.3625,y_1:.6,x_2:.4,y_2:.6,ident:4,state:1},{x_1:.6,y_1:.6,x_2:.6375,y_2:.6,ident:5,state:1},{x_1:.3625,y_1:.35,x_2:.4,y_2:.35,ident:6,state:1},{x_1:.6,y_1:.35,x_2:.6375,y_2:.35,ident:7,state:1},{x_1:.3625,y_1:.6,x_2:.3625,y_2:.85,ident:8,state:1},{x_1:.6375,y_1:.6,x_2:.6375,y_2:.85,ident:9,state:1},{x_1:.3625,y_1:.35,x_2:.3625,y_2:.6,ident:10,state:1},{x_1:.6375,y_1:.35,x_2:.6375,y_2:.6,ident:11,state:1}];window.onresize=initialise(),parallels_1.oninput=function(){parallels_value=1,showResults=!1,onStop()},parallels_2.oninput=function(){parallels_value=2,showResults=!1,onStop()},parallels_3.oninput=function(){parallels_value=3,showResults=!1,onStop()},voltages.oninput=function(){voltmax=parseFloat(voltages.value),showResults=!1,onStop()};var rects=[{x:.125*x,y:.75*y,w:.2*x,h:.2*y,ident:1,state:0},{x:.4*x,y:.75*y,w:.2*x,h:.2*y,ident:2,state:0},{x:.675*x,y:.75*y,w:.2*x,h:.2*y,ident:3,state:0},{x:.125*x,y:.5*y,w:.2*x,h:.2*y,ident:4,state:0},{x:.4*x,y:.5*y,w:.2*x,h:.2*y,ident:5,state:0},{x:.675*x,y:.5*y,w:.2*x,h:.2*y,ident:6,state:0},{x:.125*x,y:.25*y,w:.2*x,h:.2*y,ident:7,state:0},{x:.4*x,y:.25*y,w:.2*x,h:.2*y,ident:8,state:0},{x:.675*x,y:.25*y,w:.2*x,h:.2*y,ident:9,state:0}],i=0;animate();